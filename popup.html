<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>FatGPT</title>
    <style>
      :root {
        --bg: #212121;
        --border: #9ca3af;
        --text: #e5e7eb;
        --white: #fff;
        --muted: #9ca3af;
        --accent: #10a37f;
        --accent-2: #16bd8b;

        /* layout rhythm */
        --popup-width: 600px;
        --section-gap: 14px;
        --section-pad: 10px;
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
        /* max-width: 100%; */
      }

      html {
        min-width: var(--popup-width);
        margin: 0;
        padding: 12px;
      }
      body {
        width: 100%;
        margin: 0;
        padding: 12px;
        font: 15px ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, "Noto Sans";
        line-height: 1.45;
        background: var(--bg);
        color: var(--white);
      }

      .meta,
      .section,
      .footer,
      .row,
      label,
      input,
      .btn,
      .kbd {
        font-size: inherit;
      }
      .meta {
        color: var(--muted);
      }

      .title {
        font-weight: 900;
        font-size: 18px;
        letter-spacing: 0.2px;
      }

      .top {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 8px;
        margin-bottom: var(--section-gap);
      }

      /* Flex row: label grows, input stays tight */
      .row {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-top: 6px;
      }
      .row label {
        color: var(--muted);
        flex: 1 1 auto; /* take remaining space */
      }

      input[type="number"] {
        width: 96px;
        background: transparent;
        color: var(--white);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 6px 8px;
        outline: none;
        flex: 0 0 auto;
      }
      input[type="number"]:focus {
        border-color: var(--accent);
        box-shadow: 0 0 0 2px color-mix(in srgb, var(--accent) 35%, transparent);
      }

      input[type="range"] {
        -webkit-appearance: none;
        appearance: none;
        width: 100%;
        height: 6px;
        background: linear-gradient(90deg, var(--accent), var(--accent-2));
        border-radius: 999px;
        outline: none;
        display: block;
      }
      input[type="range"]::-webkit-slider-thumb,
      input[type="range"]::-moz-range-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background: var(--accent);
        border: 2px solid #fff;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
        cursor: pointer;
      }
      input[type="range"]::-moz-range-track {
        height: 6px;
        background: transparent;
      }

      #slider {
        width: 100%;
      }

      .btn {
        width: 75%;
        border: 1px solid var(--border);
        background: transparent;
        color: var(--text);
        padding: 8px 10px;
        margin-top: 10px;
        border-radius: 8px;
        cursor: pointer;
        text-align: center;
        margin-left: auto;
        margin-right: auto; /* center */
        display: block;
      }
      .btn:hover {
        border-color: var(--accent);
        box-shadow: 0 0 0 2px color-mix(in srgb, var(--accent) 20%, transparent)
          inset;
      }

      /* Flex section: vertical stack with spacing, handles long lines */
      .section {
        margin-top: var(--section-gap);
        padding-top: var(--section-pad);
        border-top: 1px solid var(--border);
        color: var(--muted);
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .shortcuts-col {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .shortcuts-col span {
        display: flex;
        justify-content: space-between;
        align-items: center;
        align-self: center;
        width: 35%;
      }

      .shortcut-instructions {
        text-align: center;
      }

      .kbd {
        appearance: none;
        -webkit-appearance: none;
        background: rgba(255, 255, 255, 0.05);
        color: var(--text);
        border: 1px solid var(--border);
        border-bottom-width: 2px;
        border-radius: 6px;
        padding: 2px 8px;
        cursor: pointer;
        user-select: none;
        font: 12px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
      }
      .kbd:hover {
        border-color: var(--accent);
      }
      .kbd:focus-visible {
        outline: 2px solid var(--accent);
        outline-offset: 2px;
      }

      .footer {
        text-align: center;
      }
      .footer a {
        color: #6cf;
        text-decoration: none;
      }
      .footer a:hover {
        text-decoration: underline;
      }
    </style>
  </head>

  <body>
    <div class="top">
      <div class="title">FatGPT</div>
      <div class="meta">
        Cap: <span id="capPx">—</span> · Mode: <span id="mode">—</span>
      </div>
    </div>

    <!-- shown only when on a ChatGPT tab -->
    <div id="controls">
      <!-- Size section -->
      <div class="section" id="size">
        <div class="row">
          <label for="widthPx"><strong>Max width (px)</strong></label>
          <input id="widthPx" type="number" min="600" max="5000" step="10" />
        </div>

        <input id="slider" type="range" min="600" max="5000" step="10" />
        <button id="reset" class="btn">
          Reset to native (remove override)
        </button>
      </div>

      <!-- Shortcuts section -->
      <div class="section" id="shortcuts">
        <div><strong>Shortcuts</strong></div>
        <div class="shortcuts-col">
          <span>
            <div>Wider:</div>
            <button id="bind-wider" class="kbd">Alt + .</button>
          </span>
          <span>
            <div>Narrower:</div>
            <button id="bind-narrower" class="kbd">Alt + ,</button>
          </span>
          <span>
            <div>Reset:</div>
            <button id="bind-native" class="kbd">Alt + 0</button>
          </span>
          <span>
            <div>Max width:</div>
            <button id="bind-maxwidth" class="kbd">Alt + M</button>
          </span>
        </div>
        <div class="shortcut-instructions">
          Click a shortcut, then press new keys to set.
        </div>
        <button id="reset-shortcuts" class="btn">
          Reset shortcuts to defaults
        </button>
      </div>
    </div>

    <div
      id="notChatgpt"
      style="display: none; padding: 8px 0; color: var(--muted)"
    >
      Must be on a ChatGPT tab to use FatGPT.
    </div>

    <!-- Footer credits -->
    <div class="footer section">
      <div>Built by <strong>Karl Stencell</strong></div>
      <div>If you find FatGPT useful, please consider supporting my work.</div>
      <div>
        <a href="https://buymeacoffee.com/karlstencell" target="_blank"
          >☕ Buy me a coffee</a
        >
      </div>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
